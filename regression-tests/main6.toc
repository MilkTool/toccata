
(inline C "#include \"core.h\"\n")

(defn pr* [str]
  ;; If a block comment appears first in the body, it serves
  ;; as the documentation for the function
  (inline C Number
   "if (arg0->type == StringType) {
      fprintf(stdout, \"%-.*s\", (int)((String *)arg0)->len, ((String *)arg0)->buffer);
    } else if (arg0->type == SubStringType) {
      fprintf(stdout, \"%-.*s\", (int)((SubString *)arg0)->len, ((SubString *)arg0)->buffer);
    } else {
      fprintf(stdout, \"\\ninvalid type for 'pr*'\\n\");
      abort();
    }
    dec_and_free(arg0, 1);
    return(true);\n")
  ;; But block comments that appear after are ignored
  )

(main [_]
      (pr* "Howdy, folks\n"))

