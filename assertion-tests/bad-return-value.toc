
;; TODO: the path on the error generated is incomplete

(defprotocol C
  (eic [_]
    (assert-result r (instance? Vector r))
    []))

(deftype IC [items])

(deftype MC [constraints]
  C
  (eic [mc]
    (-> (.constraints mc)
        (some (partial instance? IC))
        (map .items))))

(main [_]
  (print-err 'FAIL!!!))
